#    utils - utility library
#    Copyright (c) 2021 on-keyday (https://github.com/on-keyday)
#    Released under the MIT license
#    https://opensource.org/licenses/mit-license.php
# generate code
# tool\binred -i src/tool/binred/test.bred -v -o generated/binred.h
package utils

import <cstdint>
import <string>

struct ID {
    A int = 0
    B int ? A eq 0x20 = 0
    C int ? C bit 0x20 = 0
}

struct Foo {
    foo std::uint8_t = 0xff
}

struct Void{

}

struct H2Frame {
    len int $ 3
    type std::uint8_t
    flag std::uint8_t
    id std::int32_t ? id egt 0
}

struct Priority {
    depend std::uint32_t
    wight std::uint8_t
}

struct DataFrame - H2Frame ? type eq 0 {
    padding std::uint8_t ? flag bit 0x8
    data std::string $ len
}

struct HeaderFrame - H2Frame ? type eq 1 {
    padding std::uint8_t ? flag bit 0x8
    priority Priority ? flag bit 0x20
    data std::string $ len - padding 
}

struct PriorityFrame - H2Frame ? type eq 2 {
    priority Priority
}