#!/bin/bash
BUILD_TYPE=$2
UTILS_BUILD_TYPE=$1
TARGET=$3
if [ ! $BUILD_TYPE ]; then
BUILD_TYPE=Debug
fi
if [ ! $UTILS_BUILD_TYPE ]; then
UTILS_BUILD_TYPE=shared
fi
COMPILER_C=clang
COMPILER_CXX=clang++
INSTALL_PREFIX=$(pwd)
cmake -D CMAKE_C_COMPILER=$COMPILER_C -D CMAKE_CXX_COMPILER=$COMPILER_CXX -G Ninja -D CMAKE_BUILD_TYPE=$BUILD_TYPE -D UTILS_BUILD_TYPE=$UTILS_BUILD_TYPE -D CMAKE_INSTALL_PREFIX=$INSTALL_PREFIX -S . -B built/$UTILS_BUILD_TYPE/$BUILD_TYPE
ninja -C built/$UTILS_BUILD_TYPE/$BUILD_TYPE $TARGET
ninja -C built/$UTILS_BUILD_TYPE/$BUILD_TYPE install
